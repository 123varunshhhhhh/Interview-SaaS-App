<!DOCTYPE html>
<html>
  <head>
    <title>VAPI Connection Test</title>
    <script src="https://cdn.jsdelivr.net/npm/@vapi-ai/web@latest/dist/index.js"></script>
  </head>
  <body>
    <h1>VAPI Connection Test</h1>
    <button id="testBtn">Test Connection</button>
    <div id="status"></div>
    <div
      id="logs"
      style="
        margin-top: 20px;
        padding: 10px;
        background: #f0f0f0;
        font-family: monospace;
        white-space: pre-wrap;
      "
    ></div>

    <script>
      const assistantId = "75cb2fd1-b6da-4172-b056-849c6b76e205";
      const webToken = "bfd319b5-1b35-4123-aea4-1e39dba71991";

      const statusDiv = document.getElementById("status");
      const logsDiv = document.getElementById("logs");

      function log(message) {
        console.log(message);
        logsDiv.textContent += message + "\n";
      }

      const vapi = new Vapi(webToken);

      vapi.on("call-start", () => {
        log("‚úÖ Call started successfully!");
        statusDiv.innerHTML =
          '<h2 style="color: green;">‚úÖ Connection Working!</h2>';
      });

      vapi.on("call-end", () => {
        log("üìû Call ended");
      });

      vapi.on("error", (error) => {
        log("‚ùå Error: " + JSON.stringify(error, null, 2));
        statusDiv.innerHTML =
          '<h2 style="color: red;">‚ùå Connection Failed</h2>';
      });

      vapi.on("message", (message) => {
        log("üì® Message: " + JSON.stringify(message, null, 2));
      });

      document.getElementById("testBtn").addEventListener("click", async () => {
        try {
          log("üîÑ Testing connection...");
          log("Assistant ID: " + assistantId);
          log("Web Token: " + webToken.substring(0, 8) + "...");
          statusDiv.innerHTML =
            '<h2 style="color: orange;">‚è≥ Connecting...</h2>';

          await vapi.start(assistantId);
        } catch (error) {
          log("‚ùå Caught error: " + JSON.stringify(error, null, 2));
          statusDiv.innerHTML =
            '<h2 style="color: red;">‚ùå Failed to Start</h2>';
        }
      });
    </script>
  </body>
</html>
